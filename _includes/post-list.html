<div class="posts" id="post-list">
  {% if paginator.page > 1 %}
    {% include pagination-nav.html %}
  {% endif %}
  <ul>
    {%- comment -%}
      Loop through all posts in paginator.posts. Optionally, style the first two as 'recent'.
    {%- endcomment -%}
    {% for post in paginator.posts %}
      {%- assign is_recent = forloop.index0 < 2 -%}
      {%- assign has_post_image = post.image and post.image contains 'images/posts/' -%}
      {%- assign has_any_image = post.image -%}
      <li class="post-summary-container" style="max-width:40em;">
        <div class="post-flex">
          {%- comment -%} Show left image if present and not a 'post image' {%- endcomment -%}
          {% unless has_post_image %}
            {% if has_any_image %}
              <a href="{{ post.url | relative_url }}#content" title="{{ post.title }}" class="post-title-link">
                <img class="title-image" src="{{ post.image | relative_url }}" alt="{{ post.title }} image">
              </a>
            {% else %}
              <a href="{{ post.url | relative_url }}#content" title="{{ post.title }}" class="post-title-link">
                <img class="title-image" src="{{ '/assets/images/icons/default.webp' | relative_url }}" alt="Default post image">
              </a>
            {% endif %}
          {% endunless %}
          <div class="post-list-main">
            <div class="post-list-text">
              <em><small class="date">{{ post.date | date: "%Y-%m-%d" }}</small></em><br />
              <a href="{{ post.url | relative_url }}#content" title="{{ post.title }}" class="post-title-link">{{ post.title }}</a>
            </div>
            {%- comment -%} Show right image if present and is a 'post image' {%- endcomment -%}
            {% if has_post_image %}
              <a href="{{ post.url | relative_url }}#content" title="{{ post.title }}" class="post-title-link">
                <img src="{{ post.image | relative_url }}" alt="{{ post.title }} image" class="post-list-image">
              </a>
            {% endif %}
          </div>
        </div>
        <br />
        {% include post-meta.html post=post %}
        {%- comment -%} Show full summary for all posts {%- endcomment -%}
        <small class="post-summary">{{ post.summary }}</small>
      </li>
    {% endfor %}
  </ul>
  {% include pagination-nav.html %}
  <div class="pagination-total" style="margin-top:0.5em;font-size:1.1em;">
    {{ site.posts | size }} total posts
  </div>
  <script src="/assets/js/scroll-utils.js"></script>
  <script>
    // Smooth scroll to post list if hash is present
    document.addEventListener('DOMContentLoaded', function() {
      if (window.location.hash === '#post-list') {
        scrollToElement('#post-list');
      }
    });
  </script>
</div>
